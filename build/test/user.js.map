{"version":3,"sources":["../../server/src/test/user.js"],"names":["assert","chai","expect","use","chaiHTTP","API_PREFIX","before","done","describe","it","request","app","post","send","name","email","phone","then","res","to","have","status","equal","body","type","catch","err","console","log","message","password","after","User","destroy","where"],"mappings":"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","sourcesContent":["import chai from 'chai';\r\nimport chaiHTTP from 'chai-http';\r\nimport app from '../app';\r\nimport User from '../db/models/users';\r\n\r\nconst { assert, expect, use } = chai;\r\n\r\nuse(chaiHTTP);\r\n\r\nconst API_PREFIX = '/api/v1';\r\n\r\nbefore(done => {\r\n    done();\r\n});\r\n\r\ndescribe('User Auth Signup Endpoint Tests', () => {\r\n    it('POST /auth/signup - User SignUp Validation Test(Required)', done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/signup`)\r\n            .send({\r\n                name: 'Roger Test',\r\n                email: 'roger@test.com',\r\n                phone: '08028372825'\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(400);\r\n                assert.equal(res.body.status, 'error');\r\n                assert.equal(res.body.type, 'validation');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/signup', err.message));\r\n    });\r\n    it('POST /auth/signup - User SignUp Validation Test(Email)', done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/signup`)\r\n            .send({\r\n                name: 'Roger Test',\r\n                email: 'roger',\r\n                password: 'pass'\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(400);\r\n                assert.equal(res.body.status, 'error');\r\n                assert.equal(res.body.type, 'validation');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/signup', err.message));\r\n    });\r\n    it('POST /auth/signup - User Can Sign Up', done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/signup`)\r\n            .send({\r\n                name: 'Roger Test',\r\n                email: 'roger@test.com',\r\n                password: 'password'\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(201);\r\n                assert.equal(res.body.status, 'success');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/signup', err.message));\r\n    });\r\n    it(\"POST /auth/signup - User Can't signup again with the same email\", done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/signup`)\r\n            .send({\r\n                name: 'Roger Test',\r\n                email: 'roger@test.com',\r\n                password: 'password'\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(500);\r\n                assert.equal(res.body.status, 'error');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/signup', err.message));\r\n    });\r\n});\r\n\r\ndescribe('User Auth Login Endpoint Tests', () => {\r\n    it('POST /auth/login - User Login Validation Test(Required)', done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/login`)\r\n            .send({\r\n                email: 'roger@test.com'\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(400);\r\n                assert.equal(res.body.status, 'error');\r\n                assert.equal(res.body.type, 'validation');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/login', err.message));\r\n    });\r\n    it('POST /auth/login - User Login Validation Test(Email)', done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/login`)\r\n            .send({\r\n                email: 'roger',\r\n                password: 'password'\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(400);\r\n                assert.equal(res.body.status, 'error');\r\n                assert.equal(res.body.type, 'validation');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/login', err.message));\r\n    });\r\n    it('POST /auth/login - User Cannot Login without being registered', done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/login`)\r\n            .send({\r\n                email: 'thesis@science.com',\r\n                password: 'password'\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(500);\r\n                assert.equal(res.body.status, 'error');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/login', err.message));\r\n    });\r\n    it('POST /auth/login - User Can Login', done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/login`)\r\n            .send({\r\n                email: 'roger@test.com',\r\n                password: 'password'\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(200);\r\n                assert.equal(res.body.status, 'success');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/login', err.message));\r\n    });\r\n    it(\"POST /auth/login - User Can't login with incorrect password\", done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/login`)\r\n            .send({\r\n                email: 'roger@test.com',\r\n                password: 'password111'\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(500);\r\n                assert.equal(res.body.status, 'error');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/login', err.message));\r\n    });\r\n});\r\n\r\nafter(done => {\r\n    User.destroy({ where: { email: 'roger@test.com' } }).then(() => {\r\n        done();\r\n    });\r\n});\r\n"],"file":"user.js"}