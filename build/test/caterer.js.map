{"version":3,"sources":["../../server/src/test/caterer.js"],"names":["assert","chai","expect","use","chaiHTTP","API_PREFIX","before","done","app","on","beforeEach","describe","it","request","post","send","name","email","phone","then","res","to","have","status","equal","body","type","catch","err","console","log","message","password","after","Caterer","destroy","where"],"mappings":"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","sourcesContent":["import chai from 'chai';\r\nimport chaiHTTP from 'chai-http';\r\nimport app from '../app';\r\nimport Caterer from '../db/models/caterer';\r\n\r\nconst { assert, expect, use } = chai;\r\n\r\nuse(chaiHTTP);\r\n\r\nconst API_PREFIX = '/api/v1';\r\n\r\nbefore(done => {\r\n    app.on('dbConnected', () => {\r\n        done();\r\n    });\r\n});\r\n\r\nbeforeEach(done => {\r\n    done();\r\n});\r\n\r\ndescribe('Caterer Auth Signup Endpoint Tests', () => {\r\n    it('POST /auth/caterer/signup - Caterer SignUp Validation Test', done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/caterer/signup`)\r\n            .send({\r\n                name: 'Roger Test',\r\n                email: 'roger@test.com',\r\n                phone: '08028372825',\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(400);\r\n                assert.equal(res.body.status, 'error');\r\n                assert.equal(res.body.type, 'validation');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/caterer/signup', err.message));\r\n    });\r\n    it('POST /auth/caterer/signup - Caterer Can Sign Up', done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/caterer/signup`)\r\n            .send({\r\n                name: 'Roger Test',\r\n                email: 'roger@test.com',\r\n                password: 'password'\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(201);\r\n                assert.equal(res.body.status, 'success');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/caterer/signup', err.message));\r\n    });\r\n    it(\"POST /auth/caterer/signup - Caterer Can't signup again with the same email\", done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/caterer/signup`)\r\n            .send({\r\n                name: 'Roger Test',\r\n                email: 'roger@test.com',\r\n                password: 'password'\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(500);\r\n                assert.equal(res.body.status, 'error');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/caterer/signup', err.message));\r\n    });\r\n});\r\n\r\ndescribe('Caterer Login Endpoint Tests', () => {\r\n    it('POST /auth/caterer/login - Caterer Login Validation Test(Required)', done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/caterer/login`)\r\n            .send({\r\n                email: 'roger@test.com'\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(400);\r\n                assert.equal(res.body.status, 'error');\r\n                assert.equal(res.body.type, 'validation');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/caterer/login', err.message));\r\n    });\r\n    it('POST /auth/caterer/login - Caterer Cannot Login without being registered', done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/caterer/login`)\r\n            .send({\r\n                email: 'thesis@science.com',\r\n                password: 'password'\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(500);\r\n                assert.equal(res.body.status, 'error');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/caterer/login', err.message));\r\n    });\r\n    it('POST /auth/caterer/login - Caterer Can Login', done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/caterer/login`)\r\n            .send({\r\n                email: 'roger@test.com',\r\n                password: 'password'\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(200);\r\n                assert.equal(res.body.status, 'success');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/caterer/login', err.message));\r\n    });\r\n    it(\"POST /auth/caterer/login - Caterer Can't login with incorrect password\", done => {\r\n        chai\r\n            .request(app)\r\n            .post(`${API_PREFIX}/auth/caterer/login`)\r\n            .send({\r\n                email: 'roger@test.com',\r\n                password: 'password111'\r\n            })\r\n            .then(res => {\r\n                expect(res).to.have.status(500);\r\n                assert.equal(res.body.status, 'error');\r\n                done();\r\n            })\r\n            .catch(err => console.log('POST /auth/caterer/login', err.message));\r\n    });\r\n});\r\n\r\nafter(done => {\r\n    Caterer.destroy({ where: { email: 'roger@test.com' } }).then(() => {\r\n        done();\r\n    });\r\n});\r\n"],"file":"caterer.js"}